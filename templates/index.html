<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTS Professional - Conversor de Texto a Voz</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        window.API_BASE_URL = "{{ api_base_url }}";
    </script>
</head>
<body data-api-base="{{ api_base_url }}">
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                        <circle cx="20" cy="20" r="18" fill="#6366f1"/>
                        <path d="M15 15l10 5-10 5V15z" fill="white"/>
                    </svg>
                    <h1>TTS Professional</h1>
                </div>
                <div class="status-badge">
                    <span class="status-dot"></span>
                    <span>Offline Ready</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="background: #dbeafe;">
                        <svg width="24" height="24" fill="#3b82f6" viewBox="0 0 24 24">
                            <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                            <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                        </svg>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">Voces Masculinas</span>
                        <span class="stat-value" id="male-count">0</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: #fce7f3;">
                        <svg width="24" height="24" fill="#ec4899" viewBox="0 0 24 24">
                            <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                            <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                        </svg>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">Voces Femeninas</span>
                        <span class="stat-value" id="female-count">0</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: #eef2ff;">
                        <svg width="24" height="24" fill="#6366f1" viewBox="0 0 24 24">
                            <path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 14.5A6.5 6.5 0 0112 5a6.5 6.5 0 010 11.5z"/>
                        </svg>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">Voces Adicionales</span>
                        <span class="stat-value" id="other-count">0</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: #d1fae5;">
                        <svg width="24" height="24" fill="#10b981" viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">Calidad</span>
                        <span class="stat-value">Premium</span>
                    </div>
                </div>
            </div>

            <!-- Main Card -->
            <div class="card">
                <div class="card-header">
                    <h2>Convertir Texto a Voz</h2>
                    <p>Escribe o carga tu texto para convertirlo en audio de alta calidad</p>
                    <p id="sync-status" class="status-helper">Sincronizando modelos locales...</p>
                </div>

                <div class="card-body">
                    <!-- File Upload Area -->
                    <div class="upload-area" id="upload-area">
                        <input type="file" id="file-input" accept=".txt,.md" hidden>
                        <svg width="48" height="48" fill="#94a3b8" viewBox="0 0 24 24">
                            <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                        </svg>
                        <h3>Arrastra un archivo aquí</h3>
                        <p>o haz clic para seleccionar</p>
                        <span class="file-types">Archivos soportados: .txt, .md</span>
                    </div>

                    <!-- Text Area -->
                    <div class="form-group">
                        <label for="text-input">
                            <span>Texto para convertir</span>
                            <span class="char-counter"><span id="char-count">0</span> / 50,000 caracteres</span>
                        </label>
                        <textarea 
                            id="text-input" 
                            placeholder="Escribe aquí el texto que deseas convertir a voz...&#10;&#10;Puedes pegar texto largo para capacitaciones, presentaciones o cualquier contenido educativo."
                            maxlength="50000"
                        ></textarea>
                    </div>

                    <!-- Voice Selection -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="gender-select">Género de voz</label>
                            <select id="gender-select">
                                <option value="">Seleccionar género</option>
                                <option value="male">Voz Masculina</option>
                                <option value="female">Voz Femenina</option>
                                <option value="other">Voz Neutral/Extra</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="voice-select">Tipo de voz</label>
                            <select id="voice-select" disabled>
                                <option value="">Primero selecciona un género</option>
                            </select>
                        </div>
                    </div>

                    <!-- Speed Control -->
                    <div class="form-group">
                        <label for="speed-slider">
                            <span>Velocidad de voz</span>
                            <span class="speed-value" id="speed-value">1.0x (Normal)</span>
                        </label>
                        <input 
                            type="range" 
                            id="speed-slider" 
                            min="0.5" 
                            max="2.0" 
                            step="0.1" 
                            value="1.0"
                            class="slider"
                        >
                        <div class="slider-labels">
                            <span>0.5x</span>
                            <span>1.0x</span>
                            <span>1.5x</span>
                            <span>2.0x</span>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="actions">
                        <button id="clear-btn" class="btn btn-secondary">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                            </svg>
                            Limpiar
                        </button>
                        <button id="generate-btn" class="btn btn-primary" disabled>
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            Generar Audio
                        </button>
                    </div>

                    <!-- Progress -->
                    <div id="progress-container" class="progress-container" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <p class="progress-text" id="progress-text">Procesando...</p>
                    </div>

                    <!-- Result -->
                    <div id="result-container" class="result-container" style="display: none;">
                        <div class="result-card">
                            <div class="result-icon">
                                <svg width="32" height="32" fill="#10b981" viewBox="0 0 24 24">
                                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                </svg>
                            </div>
                            <div class="result-info">
                                <h3>Audio generado exitosamente</h3>
                                <p id="result-voice-info"></p>
                            </div>
                            <audio id="audio-player" controls></audio>
                            <button id="download-btn" class="btn btn-success">
                                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"/>
                                </svg>
                                Descargar Audio
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Voice Preview Cards -->
            <div class="voices-section">
                <h2 class="section-title">Voces Disponibles</h2>
                
                <h3 class="subsection-title">Voces Masculinas</h3>
                <div class="voices-grid" id="male-voices"></div>

                <h3 class="subsection-title">Voces Femeninas</h3>
                <div class="voices-grid" id="female-voices"></div>

                <h3 class="subsection-title">Voces Adicionales</h3>
                <div class="voices-grid" id="other-voices"></div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>TTS Professional - Conversor de Texto a Voz Offline | Powered by Piper TTS</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
